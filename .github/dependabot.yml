# ğŸ¤– Dependabot è‡ªåŠ¨ä¾èµ–æ›´æ–°é…ç½®
# 
# æ­¤é…ç½®å¯ç”¨ GitHub Dependabot æ¥è‡ªåŠ¨æ£€æµ‹å’Œåˆ›å»º PR 
# æ¥æ›´æ–°é¡¹ç›®ä¾èµ–ï¼Œå¸®åŠ©ä¿æŒé¡¹ç›®å®‰å…¨æ€§
#
# è¯¦ç»†ä¿¡æ¯: https://docs.github.com/en/code-security/dependabot

version: 2
updates:
  # Python ä¾èµ–æ›´æ–°é…ç½®
  - package-ecosystem: "pip"
    directory: "/"
    schedule:
      interval: "weekly"        # æ¯å‘¨æ£€æŸ¥æ›´æ–°
      day: "monday"            # å‘¨ä¸€æ‰§è¡Œ
      time: "09:00"            # ä¸Šåˆ9ç‚¹
      timezone: "Asia/Shanghai" # ä½¿ç”¨ä¸­å›½æ—¶åŒº
    
    # è‡ªåŠ¨åˆå¹¶è®¾ç½®
    open-pull-requests-limit: 10  # åŒæ—¶æœ€å¤šæ‰“å¼€10ä¸ªPR
    
    # æ›´æ–°ç­–ç•¥
    versioning-strategy: "increase"  # å…è®¸ç‰ˆæœ¬å¢åŠ 
    
    # PR è®¾ç½®
    commit-message:
      prefix: "â¬†ï¸ deps"
      prefix-development: "â¬†ï¸ dev-deps"
      include: "scope"
    
    # æ ‡ç­¾è®¾ç½®
    labels:
      - "dependencies"
      - "automated"
      - "security"
    
    # å¿½ç•¥ç‰¹å®šä¾èµ–ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰
    ignore:
      # ç¤ºä¾‹ï¼šå¿½ç•¥ä¸»è¦ç‰ˆæœ¬æ›´æ–°
      - dependency-name: "torch"
        update-types: ["version-update:semver-major"]
      - dependency-name: "transformers"  
        update-types: ["version-update:semver-major"]
    
    # å…è®¸çš„æ›´æ–°ç±»å‹
    allow:
      - dependency-type: "direct"      # ç›´æ¥ä¾èµ–
      - dependency-type: "indirect"    # é—´æ¥ä¾èµ–

  # GitHub Actions å·¥ä½œæµæ›´æ–°
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "monthly"       # æ¯æœˆæ£€æŸ¥
      time: "09:00"
      timezone: "Asia/Shanghai"
    
    commit-message:
      prefix: "â¬†ï¸ actions"
      include: "scope"
    
    labels:
      - "github-actions"
      - "automated"

  # Docker é•œåƒæ›´æ–°ï¼ˆå¦‚æœä½¿ç”¨ Dockerï¼‰
  - package-ecosystem: "docker"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "friday"
      time: "14:00"
      timezone: "Asia/Shanghai"
    
    commit-message:
      prefix: "â¬†ï¸ docker"
      include: "scope"
    
    labels:
      - "docker"
      - "automated"
